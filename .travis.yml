osx_image: xcode10.1
language: swift
xcode_project: sdk-xyo-swift.xcworkspace
xcode_scheme: sdk-xyo-swift
xcode_destination: platform=iOS Simulator,OS=11.3,name=iPhone X
addons:
  sonarcloud:
    organization: xyo-network
    token:
      secure: "Q7P23SmCyEouGNjaah/zTwFoufHHQ5YbEP2uadqUIkXfXu6RUqS22LN7rvBFnqTKKqMFB83mHB1CTnOSQK4rAjnfnlczcuMJ/ZcYPKvTc7rNOYCLzHxusiSd9yfVIPgjaUBKROaYdCF4svwCCF5tUUvrUveESucWUsqcm8ukzBCrGgZvhbzZppfZjUrY6NE/nzuguQGftMoI8RmGCEr0ynl6p3Ww13uvPVlCY1FPmrVJcAAwl7I0IqzxHspTuWouxBhzQNm4ubCfGv00zEaWIXIB5vSSI2NB2bLw/6yoXmkzLSpkc8AwgNJRTJ+fEwe53Z7IsZxHAfq5ZR03gETjIMQg3d2LYC400196ENCFSe4v5nDkN6T2t+I/OAtBRtuj/49rMEqlYRBIncr3VdhJ/TWFDaKM0dHS2+M5dedBFlFyIbbJqtPwcwQxTRFVoFkOINX3DCGo84jE3DYP9e+ZBycbBm2+3nJm/+bbxmSQKTUTQI6fKA4JP2m0nOBtb2+3HJ4P9G5t28crFd/lakyRltqId5TlAm8EBkorvJhlKlMNlY9bbto4bVqMUkUsaJ60lev0J7rbKikaE9jVXp+FFY0X8Rig3QCj0DFwad1f0DEpApuvb7OBHbWX+beTivEjAokoLZEAnvJsfwD+47fh2zOkVSz+Lj/Cg1FUKhaNcFM="

    
before_install:
  - gem install cocoapods --pr
  - pod repo update

install:
  - gem install slather

before_script:
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod 777 ./cc-test-reporter

script:
  - pod install &&
    xcodebuild -workspace sdk-xyo-swift.xcworkspace -scheme sdk-xyo-swift -destination platform\=iOS\ Simulator,OS\=12.1,name\=iPhone\ X build test | xcpretty
  - sonar-scanner

after_script:
  - ./cc-test-reporter after-build
